(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{386:function(e,t,a){"use strict";a.d(t,"d",function(){return c}),a.d(t,"f",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"g",function(){return u}),a.d(t,"c",function(){return d});var n=a(390),r=a.n(n);function c(e,t){if(!e)return null;var a=r()(e).format("YYYY-MM-DDTHH:mm:ss");return null!=t&&(a=r()(e).format(t)),a}function i(e,t){if(!e)return null;var a=r()(e).format("D/M/YYYY");return null!=t&&(a=r()(e).format(t)),a}function o(e,t){if(null==e||""===e)return"";var a="",n=e.indexOf("{"),r=e.indexOf("}");return n>-1&&n>-1&&n<r&&(a=function(e,t,a,n){return t>e.length-1?e:e.substr(0,t)+n+e.substr(a+1)}(e,n,r,t)),a}function l(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function s(e){var t=new Date(e+"z");return r.a.utc(t).local()}function u(e){return(e=e.toString().replace(/,/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function d(e){return e=e.toString().replace(/,/g,""),isNaN(parseInt(e))?0:parseInt(e)}},388:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return c});var n=a(22),r={Text:"text",Number:"number",Money:"money",Password:"password",Select:"select",CheckBox:"checkbox",Radio:"radio",AutoComplete:"autocomplete",DateTime:"date",DateTimeUTC:"dateUTC",ReactSelect:"react-select",ReactSelectMultiple:"react-select-multiple",ReactSelectAsync:"react-select-async",DuplicateText:"DuplicateText",Email:"Email"},c=function e(t,a,r,c,i,o,l,s,u){Object(n.a)(this,e),this.Name=t,this.Type=a,this.Value=r,this.Required=c,this.IsReadOnly=i,this.IsDefaultField=o,this.Regex=l,this.SelectConfig=s||{},this.DuplicateConfig=u||{}}},389:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return o});var n=a(18),r=a(73),c=a(32);function i(e,t,a){return 400===e?(r.toastr.error(t,a(n.a.common.error400GetAPI)),!0):401===e?(r.toastr.error(t,a(n.a.common.error401GetAPI)),!0):403===e?(r.toastr.error(t,a(n.a.common.error403GetAPI)),!0):404===e&&(r.toastr.error(t,a(n.a.common.error404GetAPI)),!0)}function o(e){var t=c.a.ParamAdd;return e&&e.params&&e.params.id&&(t=e.params.id>0?parseInt(e.params.id):e.params.id),t}},393:function(e,t,a){"use strict";var n=a(2),r=a(4),c=a(22),i=a(23),o=a(26),l=a(24),s=a(108),u=a(25),d=a(1),m=a.n(d),f=a(18),p=a(5),b=a(399),h=a.n(b),y=a(400),g=a.n(y),T=a(386),v=a(141),S=a(388),E=a(389),C=a(32);function O(e){var t=e?"1px solid #9b9fa3":"1px solid #f86c6b",a=e?"1px solid #8ad4ee":"1px solid #f86c6b",n=e?"0 0 0 0.2rem rgba(32, 168, 216, 0.25)":"0 0 0 0.2rem rgba(248, 108, 107, 0.25)";return{control:function(e,c){return Object(r.a)({},e,{minHeight:"35px","&:hover":{},border:c.isFocused?a:t,boxShadow:c.isFocused?n:0})}}}function N(e,t){var a=e.find(function(e){return e.value===t});return a||null}var A=a(73),D=a(19),j=a(401);a.d(t,"a",function(){return L});var R=[],I=null,L=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).checkDuplicate=[],a.handleSubmitForm=function(e){if(e&&(e.preventDefault(),a.handleValidation())){var t=a.state.model,n=a.props.fields;n.filter(function(e){return e.Type===S.a.DateTimeUTC&&!e.IsDefaultField}).forEach(function(e){t[e.Name]=new Date(t[e.Name]).toISOString()}),n.filter(function(e){return e.Type===S.a.Money}).forEach(function(e){t[e.Name]=Object(T.c)(t[e.Name])}),n.filter(function(e){return e.Type===S.a.Text}).forEach(function(e){t[e.Name]=t[e.Name].trim()}),a.addOrEditAction(t)}},a.handleBackList=function(){var e=a.props.history;e&&e.goBack()},a.addOrEditAction=function(e){var t=a.props.match;Object(E.b)(t)===C.a.ParamAdd?a.props.addAction(e):a.props.editAction(e)},a.requestAction=function(e){var t=e.getByIdModel,a=e.addModel,n=e.editModel,r=e.checkDuplicateModel;return t&&t.isLoading?(I=C.a.GET_BY_ID,!0):a&&a.isLoading?(I=C.a.ADD,!0):n&&n.isLoading?(I=C.a.EDIT,!0):!(!r||!r.isLoading)&&(I=C.a.CHECK_DUPLICATE,!0)},a.responseAction=function(e){var t=e.t,n=e.keyFields,c=e.addModel,i=e.editModel,o=e.getByIdModel,l=e.fields;switch(I){case C.a.ADD:if(!c||!c.responseData||Object(E.a)(c.responseData.status,t(n.AddTitle),t))return;var s=c.responseData;s.Success?(A.toastr.success(t(n.AddTitle),t(f.a.common.addDataSuccess)),a.setState(Object(r.a)({},a.state,{model:Object(T.a)(a.state.initModel)}))):Object(v.e)(s.Message)?A.toastr.error(t(n.AddTitle),t(f.a.common.addDataFail)):A.toastr.error(t(n.AddTitle),s.Message);break;case C.a.EDIT:if(!i||!i.responseData||Object(E.a)(i.responseData.status,t(n.EditTitle),t))return;var u=i.responseData;i.responseData.Success?A.toastr.success(t(n.EditTitle),t(f.a.common.editDataSuccess)):Object(v.e)(u.Message)?A.toastr.error(t(n.EditTitle),t(f.a.common.editDataFail)):A.toastr.error(t(n.AddTitle),u.Message);break;case C.a.GET_BY_ID:if(!o||!o.responseData||Object(E.a)(o.responseData.status,t(n.GetByIdTitle),t))return;if(o.responseData.Success){var d=o.responseData.Data;if(d)l.filter(function(e){return e.Type===S.a.DateTimeUTC}).forEach(function(e){d[e.Name]&&(d[e.Name]=Object(T.d)(Object(T.b)(d[e.Name])))}),a.setState(Object(r.a)({},a.state,{model:Object(T.a)(d)}))}else A.toastr.error(t(n.GetByIdTitle),t(f.a.common.errorGetByIdAPI))}I=null},a.moneyOnBlur=function(e,t){var n=a.state.model,c=e.target?e.target.value:"";n[t]=Object(T.g)(c),a.setState(Object(r.a)({},a.state,{model:n}))};var i=e.fields.reduce(function(e,t){return Object(r.a)({},e,Object(n.a)({},t.Name,t.Value))},{});return a.state={errors:{},initModel:Object(T.a)(i),model:Object(T.a)(i)},a.handleChangeFields=a.handleChangeFields.bind(Object(s.a)(a)),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){R[0]&&R[0].focus();var e=this.props.match;if(Object(E.b)(e)!==C.a.ParamAdd){var t="?id="+Object(E.b)(e);this.props.getByIdAction(t)}}},{key:"handleValidation",value:function(){var e=this.props,t=e.t,a=e.keyFields,n=e.fields,r=this.state.model,c=!0,i={},o=!1;return n.map(function(e,n){return e.Required&&(e.Type===S.a.ReactSelect&&0===r[e.Name]||e.Type===S.a.ReactSelectMultiple&&0===r[e.Name].length||Object(v.e)(r[e.Name]))&&(c=!1,i[e.Name]=Object(T.e)(t(f.a.common.fieldCanNotEmptyErrorMsg),t(a[e.Name])),R[n]&&!o&&(o=!0,R[n].focus())),!0}),this.setState({errors:i}),c}},{key:"handleChangeFields",value:function(e,t){var a=this.props,n=a.t,c=a.fields,i=a.handleChangeFieldsCallBack,o=this.state,l=o.model,s=o.errors,u=Object(T.a)(l),d=c.find(function(e){return e.Name===t});if(e&&d){if((d.Type===S.a.ReactSelect||d.Type===S.a.ReactSelectAsync)&&e.value>=0)l[t]=e.value;else if(d.Type===S.a.ReactSelectMultiple)l[t]=e.map(function(e){return e.value});else if(d.Type===S.a.DateTime||d.Type===S.a.DateTimeUTC)l[t]=Object(T.d)(e);else if(e.target&&d.Type===S.a.CheckBox)l[t]=e.target.checked;else if(e.target&&d.Type===S.a.Number)l[t]=isNaN(parseInt(e.target.value))?0:parseInt(e.target.value);else if(e.target&&d.Type===S.a.Money){var m=e.target?e.target.value:"",p=m.replace(/,/g,""),b=/^\d+$/.test(p);if(""!==m&&!b)return;l[t]=m}else if(l[t]=e.target?e.target.value:"",d.Name===S.a.Email)if(Object(v.i)(l[t])){if(s[t]){var h=Object(T.e)(n(f.a.common.fieldPhoneNumberInvalidErrorMsg),n(f.a.user.Email));s[t]===h&&delete s[t]}}else s[t]=Object(T.e)(n(f.a.common.fieldPhoneNumberInvalidErrorMsg),n(f.a.user.Email));var y=Object(T.a)(l);i&&i(u,y),this.setState(Object(r.a)({},this.state,{model:l,errors:s}))}}},{key:"handleChangeDateTimePickers",value:function(e,t){var a=this.state.model;a[e]=Object(T.d)(t),this.setState(Object(r.a)({},this.state,{model:a}))}},{key:"componentWillReceiveProps",value:function(e){this.requestAction(e)||this.responseAction(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.t,n=t.keyFields,r=t.fields,c=t.match,i=t.renderCallback,o=this.state,l=o.model,s=o.errors;i&&i(l);var u=Object(E.b)(c)===C.a.ParamAdd,d=Object(E.b)(c)===C.a.ParamAdd?a(n.AddTitle):a(n.EditTitle);return m.a.createElement(p.r,{onSubmit:this.handleSubmitForm},m.a.createElement(p.f,null,m.a.createElement(p.j,null,m.a.createElement("strong",null,d)),m.a.createElement(p.g,null,m.a.createElement(p.J,null,r.map(function(t,r){var c=a(n[t.Name])?a(n[t.Name]):a(f.a.common[t.Name]);c+=t.Required?" <sup>*</sup>":"";var i=l[t.Name],o=!!s[t.Name]||null,d=!(t.IsDefaultField&&u);return m.a.createElement(m.a.Fragment,{key:r},d&&t.Type&&m.a.createElement(p.l,{md:"6"},m.a.createElement(p.t,null,m.a.createElement(p.y,{htmlFor:t.Name},g()(c)),(t.Type===S.a.Text||t.Type===S.a.Password||t.Type===S.a.Number)&&m.a.createElement(p.u,{id:t.Name,name:t.Name,type:t.Type,value:i,invalid:o,innerRef:function(e){e&&R.push(e)},onChange:function(a){return e.handleChangeFields(a,t.Name)},readOnly:t.IsReadOnly}),t.Type===S.a.Money&&m.a.createElement(p.u,{id:t.Name,name:t.Name,type:"text",value:i,invalid:o,innerRef:function(e){e&&R.push(e)},onChange:function(a){return e.handleChangeFields(a,t.Name)},readOnly:t.IsReadOnly,onBlur:function(a){return e.moneyOnBlur(a,t.Name)}}),t.Type===S.a.Select&&t.SelectConfig&&m.a.createElement(p.u,{id:t.Name,name:t.Name,type:t.Type,value:i,onChange:function(a){return e.handleChangeFields(a,t.Name)},invalid:o},t.SelectConfig.map(function(e){return m.a.createElement("option",{key:e.Id,value:e.Id},a(f.a.common[e.KeyName]))})),t.Type===S.a.DateTime&&m.a.createElement(h.a,{id:t.Name,name:t.Name,innerRef:function(e){e&&R.push(e)},value:new Date(i),onChange:function(a){return e.handleChangeFields(a,t.Name)},className:(t.IsReadOnly?"is-readonly":s[t.Name]?"is-invalid":"")+" form-control",readOnly:t.IsReadOnly,format:"d/M/y"}),t.Type===S.a.DateTimeUTC&&m.a.createElement(h.a,{id:t.Name,name:t.Name,innerRef:function(e){e&&R.push(e)},value:new Date(i),onChange:function(a){return e.handleChangeFields(a,t.Name)},className:(t.IsReadOnly?"is-readonly":s[t.Name]?"is-invalid":"")+" form-control",readOnly:t.IsReadOnly,format:"dd/MM/y h:mm a"}),t.Type===S.a.CheckBox&&m.a.createElement(D.n,{className:"mx-1 custom-checkbox",variant:"pill",color:"primary",outline:"alt",size:"sm",checked:l[t.Name],onChange:function(a){return e.handleChangeFields(a,t.Name)}}),t.Type===S.a.ReactSelect&&function(e,t,a){if(!e.SelectConfig)return!1;if("Status"===e.Name)e.SelectConfig.options=[],e.SelectConfig.options.push({value:0,label:a(f.a.common.InActive)},{value:1,label:a(f.a.common.Active)});else if(!e.SelectConfig.options)return!1;return!0}(t,0,a)&&m.a.createElement(j.a,{className:"basic-single",classNamePrefix:"select",styles:O(!s[t.Name]),options:t.SelectConfig.options,value:N(t.SelectConfig.options,l[t.Name]),onChange:function(a){return e.handleChangeFields(a,t.Name)},placeholder:a(f.a.common.pleaseSelect)+"..."}),t.Type===S.a.ReactSelectMultiple&&t.SelectConfig&&t.SelectConfig.options&&m.a.createElement(j.a,{isMulti:!0,defaultValue:t.SelectConfig.options.filter(function(e){return l[t.Name].indexOf(e.value)>-1}),styles:O(!s[t.Name]),options:t.SelectConfig.options,className:"basic-multi-select",classNamePrefix:"select",onChange:function(a){return e.handleChangeFields(a,t.Name)},placeholder:a(f.a.common.pleaseSelect)+"..."}),t.Type===S.a.ReactSelectAsync&&t.SelectConfig&&m.a.createElement(j.a,{className:"basic-single",classNamePrefix:"select",styles:O(!s[t.Name]),options:t.SelectConfig.options,onInputChange:function(a,n){return function(e,t,a,n){"input-blur"!==t.action&&"menu-close"!==t.action&&e.length>=1&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(function(){a(e)},300))}(a,n,t.SelectConfig.OnInputChangeCallback,e)},isLoading:t.SelectConfig.isLoading,filterOption:!1,onChange:function(a){return e.handleChangeFields(a,t.Name)},placeholder:a(f.a.common.pleaseSearch)+"..."}),m.a.createElement(p.s,{className:t.Type===S.a.ReactSelect||t.Type===S.a.ReactSelectMultiple||t.Type===S.a.ReactSelectAsync?"react-select":""},s[t.Name]))))}))),m.a.createElement(p.h,null,m.a.createElement(p.b,{type:"submit",size:"sm",color:"primary"},m.a.createElement("i",{className:"fa fa-save"})," ",a(f.a.common.btnSubmit))," ",m.a.createElement(p.b,{type:"reset",size:"sm",color:"danger",onClick:this.handleBackList},m.a.createElement("i",{className:"fa fa-ban"})," ",a(f.a.common.btnBackList)))))}}]),t}(d.Component)},408:function(e,t,a){"use strict";function n(e,t){e.push(t)}function r(e,t){return-1!==e.indexOf(t)}function c(e,t){return e.filter(function(e){return e!==t})}a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return c})},635:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a(23),c=a(26),i=a(24),o=a(25),l=a(1),s=a.n(l),u=a(96),d=a(63),m=a(18),f=a(107),p=a.n(f),b=a(35),h=a(36),y=a(141),g=a(386),T=a(393),v=a(388),S=a(67),E=a(37),C=a(38),O=a(389),N=a(408),A=a(10),D=a(9),j=a(8),R=a(6),I=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).requestAction=function(e){var t=e.carGetAllSelectReducer,n=e.driverGetAllSelectReducer,r=e.companyGetAllSelectReducer,c=e.generateMoneyTransportationReducer,i=a.state.currentAction,o=!1;return t.isLoading&&!Object(N.b)(i,j.a.GETALL_SELECT)&&(Object(N.a)(i,j.a.GETALL_SELECT),o=!0),n.isLoading&&!Object(N.b)(i,D.a.GETALL_SELECT)&&(Object(N.a)(i,D.a.GETALL_SELECT),o=!0),r.isLoading&&!Object(N.b)(i,A.a.GETALL_SELECT)&&(Object(N.a)(i,A.a.GETALL_SELECT),o=!0),c.isLoading&&!Object(N.b)(i,R.a.GENERATEMONEY)&&(Object(N.a)(i,R.a.GENERATEMONEY),o=!0),o},a.responseAction=function(e){var t=e.carGetAllSelectReducer,n=e.t,r=e.driverGetAllSelectReducer,c=e.companyGetAllSelectReducer,i=e.generateMoneyTransportationReducer,o=a.state,l=o.fields,s=o.currentAction;if(!t.isLoading&&Object(N.b)(s,j.a.GETALL_SELECT)){if(!t.responseData||Object(O.a)(t.responseData.status,"T\u1ea3i danh s\xe1ch Xe",n))return;l.find(function(e){return"CarId"===e.Name}).SelectConfig.options=t.responseData.Data.Records.map(function(e){return{value:e.Id,label:"".concat(e.CarNumber," | ").concat(e.CapacityType)}}),a.setState({currentAction:Object(N.c)(s,j.a.GETALL_SELECT)})}if(!r.isLoading&&Object(N.b)(s,D.a.GETALL_SELECT)){if(!r.responseData||Object(O.a)(r.responseData.status,"T\u1ea3i danh s\xe1ch Xe",n))return;var u=r.responseData.Data.Records,d=l.find(function(e){return"DriverPrimaryId"===e.Name}),m=l.find(function(e){return"DriverSecondaryId"===e.Name});d.SelectConfig.options=u.filter(function(e){return e.DriverTypeId===S.a.Primary}).map(function(e){return{value:e.Id,label:e.Name}}),m.SelectConfig.options=u.filter(function(e){return e.DriverTypeId===S.a.Secondary}).map(function(e){return{value:e.Id,label:e.Name}}),a.setState({currentAction:Object(N.c)(s,D.a.GETALL_SELECT)})}if(!c.isLoading&&Object(N.b)(s,A.a.GETALL_SELECT)){if(!c.responseData||Object(O.a)(c.responseData.status,"T\u1ea3i danh s\xe1ch Xe",n))return;l.find(function(e){return"CompanyId"===e.Name}).SelectConfig.options=c.responseData.Data.Records.map(function(e){return{value:e.Id,label:"".concat(e.Code," | ").concat(e.Name)}}),a.setState({currentAction:Object(N.c)(s,A.a.GETALL_SELECT)})}if(!i.isLoading&&Object(N.b)(s,R.a.GENERATEMONEY)){if(!i.responseData||Object(O.a)(i.responseData.status,"Loading th\xe0nh ti\u1ec1n",n))return;a.setState({currentAction:Object(N.c)(s,R.a.GENERATEMONEY)})}},a.handleChangeFieldsCallBack=function(e,t){0!==t.CompanyId&&0!==t.CarId&&(t.CompanyId===e.CompanyId&&t.CarId===e.CarId||a.props.generateMoneyTransportationAction("?companyid=".concat(t.CompanyId,"&carid=").concat(t.CarId)))},a.renderCallback=function(e){var t=a.props.generateMoneyTransportationReducer;if(t.responseData&&t.responseData.Data>=0){var n=t.responseData.Data;e.Money=0===n?0:Object(g.g)(n),delete t.responseData}};var r=[new v.b("TransportDate",v.a.DateTime,Object(g.d)((new Date).setHours(0,0,0,0)),!0),new v.b("CarId",v.a.ReactSelect,0,!0),new v.b("CompanyId",v.a.ReactSelect,0,!0),new v.b("DocumentNumber",v.a.Text,"",!0),new v.b("Report",v.a.Text,"",!1),new v.b("Money",v.a.Money,"",!0),new v.b("Note",v.a.Text,"",!1),new v.b("DriverPrimaryId",v.a.ReactSelect,0,!0),new v.b("DriverSecondaryId",v.a.ReactSelect,null,!1)];return a.state={fields:r,currentAction:[]},Object(y.a)(),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.carGetAllSelectAction(),this.props.driverGetAllSelectAction(),this.props.companyGetAllSelectAction()}},{key:"componentWillReceiveProps",value:function(e){this.requestAction(e)||this.responseAction(e)}},{key:"render",value:function(){var e=this.props,t=e.t,a=e.addModel,n=e.editModel,r=e.getByIdModel,c=e.carGetAllSelectReducer,i=e.driverGetAllSelectReducer,o=e.companyGetAllSelectReducer,l=e.generateMoneyTransportationReducer,u=this.state.currentAction.length>0||a.isLoading||n.isLoading,d=r.isLoading||c.isLoading||i.isLoading||o.isLoading||l.isLoading,f="",b="";return u&&(f=t(d?m.a.common.loadingSpinner:m.a.common.processingSpinner),b=d?"":"overlayFullScreen"),s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(p.a,{active:u,spinner:!0,text:f,className:b},s.a.createElement(T.a,Object.assign({keyFields:m.a.transportation,tableName:"TRANSPORTATION",fields:this.state.fields,handleChangeFieldsCallBack:this.handleChangeFieldsCallBack,renderCallback:this.renderCallback},this.props))))}}]),t}(l.Component),L={getByIdAction:b.s,addAction:b.a,editAction:b.j,carGetAllSelectAction:h.d,driverGetAllSelectAction:E.j,companyGetAllSelectAction:C.g,generateMoneyTransportationAction:b.m};t.default=Object(d.b)()(Object(u.connect)(function(e){return{getByIdModel:e.getByIdTransportationReducer,addModel:e.addTransportationReducer,editModel:e.editTransportationReducer,carGetAllSelectReducer:e.carGetAllSelectReducer,driverGetAllSelectReducer:e.driverGetAllSelectReducer,companyGetAllSelectReducer:e.companyGetAllSelectReducer,generateMoneyTransportationReducer:e.generateMoneyTransportationReducer}},L)(I))}}]);
//# sourceMappingURL=10.93e40d44.chunk.js.map